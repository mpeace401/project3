<!DOCTYPE html>


<head>
   <link rel="stylesheet" type="text/css" href="/views/server.css" id="server_style"></link>
   <title>Home Page</title>
</head>
<body>
   <h1>GigaChad.com</h1>

   <!-- Creates category buttons -->
   <% for (var i = 0; i < data.menuArray.length; i++) {%>
      <!-- Creates buttons 120px below the last -->
      <button class = "button categorybutton <%= i %>" onclick = "enableMenuButtons(<%= i %>)" style = "top : <%=60 + 120*i%>px;">
         Category 
      </button>
      <% } %>


      <!-- Rectangle to hold order -->
      <div style="width:300px;height:650px;border:1px solid #000;left: 1000px; position: absolute;" ></div>

      <!--  Creates menu buttons  -->
   <% for (var i = 0; i < data.menuArray.length; i++) {%>  
      <% for (var j = 0; j < data.menuArray[i].length; j++) {%>
         <!-- Assingns buttons into class depending on category -->
         <button class = "button menubutton <%= i %>" hidden = "hidden" onclick = "addToOrder(orderArray,<%= data.menuMap.get(data.menuArray[i][j]).itemid %>)">
            <%= data.menuMap.get(data.menuArray[i][j]).itemname %>
         </button>
      <% } %>
      
      <% } %>
      
</body>

<script>
   var orderArray = [];

   // Function to enable a certain category of buttons on click
   let enableMenuButtons = (category) => {   
     let disable = document.getElementsByClassName("button menubutton");
     
     for(let i = 0; i < disable.length; i++){
         let element = disable[i]
         element.setAttribute("hidden", "hidden")
      }
      let enable = document.getElementsByClassName("button menubutton " + category);
      for(let i = 0; i < enable.length; i++){
         let element = enable[i]
         element.removeAttribute("hidden")
      }
      categoryButtons = document.getElementsByClassName("button categorybutton");
      for(let i = 0; i < categoryButtons.length; i++){
         let element = categoryButtons[i]
         element.style.backgroundColor = "white";
         element.style.color = "maroon";
      }
      categoryButton = document.getElementsByClassName("button categorybutton " + category)[0];
      categoryButton.style.backgroundColor = "maroon";
      categoryButton.style.color = "white";
   }
   
   //adds item ids to order
   let addToOrder = (orderArray, id) => {  
      orderArray.push(id);
   }

 </script>